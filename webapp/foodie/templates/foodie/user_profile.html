<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Recommendations Page</title>

        {% load static %}
        <link rel="stylesheet" href="{% static 'foodie/index.css' %}">
    </head>
  <body>
    <div class="container bg-light">
      <div class = "row">
          <div class="col">
              <img src="../../static/foodie/images/sample-logo-four.png" class="img-fluid" alt="Logo">
          </div>
          <div class="col">
              <ul class="nav justify-content-end">
                  <li class="nav-item">
                      <a class="nav-link text-dark" href="{% url 'foodie:recs' %}">Recs</a>
                  </li>
                  <li class="nav-item">
                  <a class="nav-link text-primary disabled" href="#">Profile</a>
                  </li>
              </ul>
          </div>
      </div>
      <div class = "row">
        <h3>Info</h3>
        <p>Neighborhood: Williamsburg </p> 
      </div>
      <div class = "row">
        <h3>Saved List</h1>
      </div>
      {% for restaurant in user_restaurant_list %}
      <div class="row">
          <div class="col-1"></div>
          <div class="col-10">
              <div class="container-md">
                  <div class="row">
                      <div class="col-6">
                          <h4>{{ restaurant.name }}</h4>
                          <p class="fs-6">
                              {{ restaurant.address }},
                              <br>
                              {{ restaurant.neighborhood }}
                          </p>
                      </div>
                      <div class="col text-end">
                          <p>
                              {{ restaurant.cuisine }} 
                              <br> 
                              ${{ restaurant.price_range }} - ${{ restaurant.price_range }}
                          </p>
                      </div>
                  </div>
                  <div class="row">
                      <p>
                          {% for tag in restaurant.tags %}
                          <span class="badge rounded-pill text-bg-dark">{{ tag }}</span>
                          {% endfor %}
                      </p>
                      
                  </div>
                  <div class="row float-end">
                      <div class="col">
                          <a class="btn btn-primary" href="{{ restaurant.menu_url }}" target="_blank" rel="noopener noreferrer" role="button">Menu</a>
                      </div>
                      <div class="col">
                          <button type="button" class="btn btn-success" data-bs-toggle="modal" data-bs-target="#reviewModal" data-restaurant-name="{{ restaurant.name }}" data-restaurant-id="{{ restaurant.id }}">
                            Review
                          </button>
                          <div class="modal fade" id="reviewModal" tabindex="-1" aria-labelledby="reviewModalLabel" aria-hidden="true">
                            <div class="modal-dialog">
                              <div class="modal-content">
                                <div class="modal-header">
                                  <h5 class="modal-title" id="exampleModalLabel">Review Restaurant</h5>
                                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                </div>
                                <div class="modal-body">
                                  <div class="input-group mb-3">
                                    <span class="input-group-text" id="basic-addon1">Date:</span>
                                    <input type="text" class="form-control" placeholder="ex: 9/24/22" aria-label="Date" aria-describedby="basic-addon1">
                                  </div>
                                  <div class="input-group mb-3">
                                    <span class="input-group-text" id="basic-addon1">Rating:</span>
                                    <input type="text" class="form-control" placeholder="0-100" aria-label="Rating" aria-describedby="basic-addon1">
                                  </div>
                                </div>
                                <div class="modal-footer">
                                  <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Submit</button>
                                </div>
                              </div>
                            </div>
                          </div>
                      </div>
                  </div>
                  <div class="row">
                      <div class="divider py-1 bg-light"><hr></div>
                  </div>
              </div>

              
          </div>
          <div class="col-1"></div>
      </div>
      {% endfor %}
      <!-- <ul>
      {% for restaurant in user_restaurant_list %}
          <li>{{ restaurant.name }}</li>
          <form action="/foodie/profile/visited/{{ restaurant.id }}/" method="post">
            {% csrf_token %}
            <input type="submit" value="Visited" />
        </form>
        <form action="/foodie/profile/rated/{{ restaurant.id }}/" method="post">
          {% csrf_token %}
          <label for="rating">Rating (0-100): </label>
          <input id="rating" type="text" name="rating">
          <input type="submit" value="Submit">
        </form>
      {% endfor %}
      </ul>       -->
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-u1OknCvxWvY5kfmNBILK2hRnQC3Pr17a+RTT6rIHI7NnikvbZlHgTPOOmMi466C8" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script>
      $('#reviewModal').on('show.bs.modal', function (event) {
        var button = $(event.relatedTarget) // Button that triggered the modal
        var restaurant_name = button.data('restaurantName') // Extract info from data-* attributes
        var restaurant_id = button.data('restaurantId') // Extract info from data-* attributes
        // If necessary, you could initiate an AJAX request here (and then do the updating in a callback).
        // Update the modal's content. We'll use jQuery here, but you could use a data binding library or other methods instead.
        var modal = $(this)
        modal.find('.modal-title').text('Review ' + restaurant_name)
      })
    </script>
  
  </body>
</html>